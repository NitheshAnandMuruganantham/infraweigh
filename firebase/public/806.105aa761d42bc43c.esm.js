"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[806],{10238:(e,i,n)=>{var a=n(14859);i.Z=void 0;var l=a(n(68671)),s=n(52322),t=(0,l.default)((0,s.jsx)("path",{d:"M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"Dns");i.Z=t},42872:(e,i,n)=>{var a=n(14859);i.Z=void 0;var l=a(n(68671)),s=n(52322),t=(0,l.default)((0,s.jsx)("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"}),"Domain");i.Z=t},60524:(e,i,n)=>{var a=n(14859);i.Z=void 0;var l=a(n(68671)),s=n(52322),t=(0,l.default)((0,s.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"}),"VerifiedUser");i.Z=t},99806:(e,i,n)=>{n.r(i),n.d(i,{default:()=>xe});var a=n(2784),l=n(32806),s=n(52322);const t=()=>(0,s.jsx)("div",{children:(0,s.jsx)("h1",{children:"https://infra-weigh.hasura.app"})});var r=n(69740),d=n(27591),o=n(73786),c=n(95995),h=n(74760),m=n(18281),u=n(20268),x=n(43663),p=n(5919),g=n(42872),v=n(34766),j=n(42603),b=n(49001),y=n(28319),w=n(22082),Z=n(42981),f=n(8664),_=n(1826),C=n(18236),q=n(90288),k=n(60524),S=n(33229),P=n(96610),N=n(10238);const R=240,z=[{name:"Logout",exec:()=>{C.I8.signOut(),window.location.reload()}}],F=e=>({width:R,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),E=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:`calc(${e.spacing(7)} + 1px)`,[e.breakpoints.up("sm")]:{width:`calc(${e.spacing(8)} + 1px)`}}),O=(0,r.zo)("div")((({theme:e})=>Object.assign({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar))),V=(0,r.zo)(c.ZP,{shouldForwardProp:e=>"open"!==e})((({theme:e,open:i})=>Object.assign({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},i&&{marginLeft:R,width:"calc(100% - 240px)",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}))),A=(0,r.zo)(o.ZP,{shouldForwardProp:e=>"open"!==e})((({theme:e,open:i})=>Object.assign({width:R,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},i&&Object.assign({},F(e),{"& .MuiDrawer-paper":F(e)}),!i&&Object.assign({},E(e),{"& .MuiDrawer-paper":E(e)})))),W=({children:e})=>{var i,n;const[t,o]=(0,a.useState)(null),c=(0,l.s0)(),R=(0,r.Fg)(),[F,E]=a.useState(!1),W=[{name:"Home",path:"/",icon:S.Z,active:(0,l.bS)("/")},{name:"clients",path:"/clients",icon:q.Z,active:(0,l.bS)("/clients")},{name:"weighbridges",path:"/weighbridges",icon:g.Z,active:(0,l.bS)("/weighbridges")},{name:"maintainance api access",path:"/requestacesscode",icon:k.Z,active:(0,l.bS)("/requestacesscode")},{name:"users",path:"/users",icon:N.Z,active:(0,l.bS)("/users")}];return(0,s.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,s.jsx)(u.Z,{}),(0,s.jsx)(V,{position:"fixed",open:F,children:(0,s.jsxs)(h.ZP,{children:[(0,s.jsx)(v.default,{color:"inherit","aria-label":"open drawer",onClick:async()=>{alert("Logout"),await void E(!0);const e=(0,P.V1)(C.wk,"callFunc");await e()},edge:"start",sx:Object.assign({marginRight:5},F&&{display:"none"}),children:(0,s.jsx)(j.Z,{})}),(0,s.jsx)(x.ZP,{variant:"h6",noWrap:!0,component:"div",children:"INFRA WEIGH"}),(0,s.jsxs)(d.Z,{sx:{marginLeft:"auto",flexGrow:0},children:[(0,s.jsx)(_.v2r,{sx:{mt:"45px"},anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(t),onClose:()=>{o(null)},children:z.map((e=>(0,s.jsx)(_.sNh,{onClick:e.exec,children:(0,s.jsx)(x.ZP,{textAlign:"center",children:e.name})},e.name)))}),(0,s.jsx)(_.ua7,{title:(null==(i=C.I8.currentUser)?void 0:i.displayName)+"",children:(0,s.jsx)(v.default,{onClick:e=>{o(e.currentTarget)},sx:{p:0},children:(0,s.jsx)(_.qEK,{src:(null==C.I8||null==(n=C.I8.currentUser)?void 0:n.photoURL)+""})})})]})]})}),(0,s.jsxs)(A,{variant:"permanent",open:F,children:[(0,s.jsx)(O,{children:(0,s.jsx)(v.default,{onClick:()=>{E(!1)},children:"rtl"===R.direction?(0,s.jsx)(y.Z,{}):(0,s.jsx)(b.Z,{})})}),(0,s.jsx)(p.default,{}),(0,s.jsx)(m.ZP,{children:W.map(((e,i)=>(0,s.jsxs)(w.ZP,{onClick:()=>c(e.path),sx:{":hover":{backgroundColor:e.active?"slategray":"whitesmoke"},backgroundColor:e.active?"gray":"inherit",backgroundOpacity:50,margin:1,borderRadius:"5px",minHeight:48,justifyContent:F?"initial":"center",px:2.5},children:[(0,s.jsx)(Z.ZP,{sx:{minWidth:0,mr:F?3:"auto",justifyContent:"center"},children:(0,s.jsx)(e.icon,{htmlColor:e.active?"white":"gray"})}),(0,s.jsx)(f.ZP,{primary:e.name,sx:{color:e.active?"white":"inherit",opacity:F?1:0}})]},i)))})]}),(0,s.jsx)(d.Z,{component:"main",sx:{flexGrow:1,p:3,mt:7},children:e})]})};var D=n(28865),H=n(6389),I=(n(51294),n(7512)),B=n(48266),M=n(44324),$=n(29438),L=n(62455),U=n(19055),G=n(83703),J=n(65413),X=n(47622),T=n.n(X),Y=n(44101),K=n(70868);const Q=({id:e})=>{var i,n,l,t,r,d;const[o,c]=a.useState(!1),[h,{data:m}]=(0,Y.SH)({variables:{tenentsByPkId:e}}),u=()=>{c(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.ZP,{variant:"contained",color:"secondary",size:"small",onClick:async()=>{await h(),c(!0)},children:"Edit"}),(0,s.jsxs)(B.ZP,{fullWidth:!0,open:o,onClose:u,children:[(0,s.jsx)(L.ZP,{children:"Edit Request"}),(0,s.jsx)(U.J9,{initialValues:{name:null==m||null==(i=m.tenents_by_pk)?void 0:i.name,address:(null==m||null==(n=m.tenents_by_pk)||null==(l=n.metadata)?void 0:l.address)||"",email:null==m||null==(t=m.tenents_by_pk)?void 0:t.email,phone:null==m||null==(r=m.tenents_by_pk)?void 0:r.phone,active:null==m||null==(d=m.tenents_by_pk)?void 0:d.activate},validationSchema:()=>J.Ry().shape({name:J.Z_().required("Required"),address:J.Z_().required("Required"),email:J.Z_().required("Required"),phone:J.Z_().required("Required"),active:J.Xg().required("required")}),onSubmit:async(i,{setSubmitting:n})=>{n(!0),console.log(e),await K.B.mutate({mutation:Y.S6,variables:{pkColumns:{id:e},set:{name:i.name,email:i.email,phone:i.phone,metadata:{address:i.address},activate:i.active}}}).catch((()=>{alert("realted resourses exists delete those resource to continue")})),n(!0),u()},children:({submitForm:e,isSubmitting:i,setFieldValue:n,setSubmitting:a,values:l})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.ZP,{children:(0,s.jsx)(U.l0,{children:(0,s.jsxs)(H.xu,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"name",type:"text",label:"name"}),(0,s.jsx)(U.gN,{component:G.nv,type:"email",label:"email",name:"email",sx:{my:1}}),(0,s.jsx)(U.gN,{component:G.nv,type:"text",label:"address",name:"address",sx:{my:1}}),(0,s.jsx)(U.gN,{component:G.rs,type:"checkbox",label:"active",name:"active",sx:{my:1}}),(0,s.jsx)(T(),{label:"phone",variant:"outlined",value:l.phone,countryCodeEditable:!1,sx:{my:1},defaultCountry:"in",onChange:e=>n("phone",e.toString())}),i&&(0,s.jsx)(_.ukE,{})]})})}),(0,s.jsxs)(M.ZP,{children:[(0,s.jsx)(I.ZP,{onClick:u,children:"Cancel"}),(0,s.jsx)(I.ZP,{onClick:()=>{e().then((()=>{a(!1)}))},children:"Add"})]})]})})]})]})};var ee=n(35594);const ie=()=>{const[e,i]=a.useState(!1),n=()=>{i(!1)},[l,{loading:t}]=(0,Y.Eq)();return(0,s.jsxs)("div",{children:[(0,s.jsx)(ee.Z,{open:t,setOpen:()=>null}),(0,s.jsx)(I.ZP,{variant:"outlined",sx:{m:1},onClick:()=>{i(!0)},children:"new client"}),(0,s.jsxs)(B.ZP,{fullWidth:!0,open:e,onClose:n,children:[(0,s.jsx)(L.ZP,{children:"New Client"}),(0,s.jsx)(U.J9,{initialValues:{name:"",address:"",email:"",phone:"",activate:!0},validationSchema:()=>J.Ry().shape({name:J.Z_().required("Required"),address:J.Z_().required("Required"),email:J.Z_().required("Required"),phone:J.Z_().required("Required"),activate:J.O7().required("Required")}),onSubmit:async(e,{setSubmitting:i})=>{i(!0),l({variables:{object:{name:e.name,email:e.email,phone:e.phone,activate:e.activate,metadata:{address:e.address}}}}).catch((()=>{alert("can not create new client"),i(!1)})),i(!1),n()},children:({submitForm:e,isSubmitting:i,setFieldValue:a})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.ZP,{children:(0,s.jsx)(U.l0,{children:(0,s.jsxs)(H.xu,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"name",type:"text",label:"name"}),(0,s.jsxs)(H.xu,{children:[(0,s.jsx)(_.lXp,{children:"activate facility"}),(0,s.jsx)(U.gN,{component:G.rs,type:"checkbox",name:"activate"})]}),(0,s.jsx)(U.gN,{component:G.nv,type:"text",label:"address",name:"address",sx:{my:1}}),(0,s.jsx)(U.gN,{component:G.nv,type:"email",label:"email",name:"email",sx:{my:1}}),(0,s.jsx)(T(),{label:"phone",variant:"outlined",countryCodeEditable:!1,sx:{my:1},defaultCountry:"in",onChange:e=>a("phone",e.toString())}),i&&(0,s.jsx)(_.ukE,{})]})})}),(0,s.jsxs)(M.ZP,{children:[(0,s.jsx)(I.ZP,{onClick:n,children:"Cancel"}),(0,s.jsx)(I.ZP,{onClick:()=>{e().then((()=>null))},children:"Add"})]})]})})]})]})},ne=[{field:"name",headerName:"name",width:300,editable:!1,sortable:!0},{field:"email",headerName:"e-mail id",sortable:!1,width:400},{field:"phone",headerName:"phone",sortable:!1,width:150},{field:"activate",headerName:"active",sortable:!1,width:150,valueGetter:e=>e.value?"active":"in-active"},{field:"edit",headerName:"Edit",width:130,sortable:!1,filterable:!1,renderCell:e=>(0,s.jsx)(Q,{id:e.row.id})}],ae=()=>{const{data:e,loading:i}=(0,Y.bF)();return(0,a.useEffect)((()=>{console.log(e)}),[e,i]),(0,s.jsxs)(H.xu,{children:[(0,s.jsx)(ie,{}),(0,s.jsx)(H.xu,{height:500,width:"100%",textAlign:"center",children:(0,s.jsx)(D._$r,{loading:i,rows:(null==e?void 0:e.tenents)||[],columns:ne,autoPageSize:!0,checkboxSelection:!0,disableSelectionOnClick:!0})})]})};function le(){const[e,i]=a.useState(!1),[n,{loading:l}]=(0,Y.s3)(),{data:t}=(0,Y.EX)(),r=()=>{i(!1)};return(0,s.jsxs)("div",{children:[(0,s.jsx)(ee.Z,{open:l,setOpen:()=>null}),(0,s.jsx)(I.ZP,{variant:"outlined",sx:{m:1},onClick:()=>{i(!0)},children:"new WeighBridge"}),(0,s.jsxs)(B.ZP,{fullWidth:!0,open:e,onClose:r,children:[(0,s.jsx)(L.ZP,{children:"New WeighBridge"}),(0,s.jsx)(U.J9,{initialValues:{name:"",address:"",display_name:"",pin_code:"",phone:"",mail:"",tenent:{label:"",value:null}},validationSchema:()=>J.Ry().shape({name:J.Z_().required("Required"),address:J.Z_().required("Required"),display_name:J.Z_().required("Required"),pin_code:J.Z_().required("Required"),phone:J.Z_().required("Required"),mail:J.Z_().required("Required"),tenent:J.Ry().shape({label:J.Z_().required("Required"),value:J.Z_().required("Required")}).required()}),onSubmit:async(e,{setSubmitting:i})=>{i(!0),await n({variables:{object:{tenent_id:e.tenent.value,address:e.address,display_name:e.display_name,pin_code:e.pin_code,name:e.name,phone:e.phone,mail:e.mail}}}),i(!0),r()},children:({submitForm:e,isSubmitting:i,setFieldValue:n})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.ZP,{children:(0,s.jsx)(U.l0,{children:(0,s.jsxs)(H.xu,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"name",type:"text",label:"name"}),(0,s.jsx)(U.gN,{component:G.nv,type:"text",label:"address",name:"address",sx:{my:1}}),(0,s.jsx)(U.gN,{component:G.nv,type:"text",label:"pin code",name:"pin_code",sx:{my:1}}),(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"display_name",type:"text",label:"display name"}),(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"mail",type:"email",label:"mail"}),(0,s.jsx)(T(),{label:"phone",variant:"outlined",sx:{my:1},defaultCountry:"in",onChange:e=>n("phone",e.toString())}),(0,s.jsx)(U.gN,{component:G.F2,disablePortal:!0,sx:{my:1,mb:3},name:"tenent",options:(null==t?void 0:t.tenents)||[],renderInput:e=>(0,s.jsx)(_.nvn,Object.assign({},e,{label:"tenent"}))}),i&&(0,s.jsx)(_.ukE,{})]})})}),(0,s.jsxs)(M.ZP,{children:[(0,s.jsx)(I.ZP,{onClick:r,children:"Cancel"}),(0,s.jsx)(I.ZP,{onClick:e,children:"Add"})]})]})})]})]})}var se=n(5713);const te=({id:e})=>{const[i,n]=a.useState(!1),[l,{loading:t}]=(0,Y.PO)(),[r,{data:d,loading:o}]=(0,Y.Pg)({variables:{where:{id:{_eq:e}}}}),c=()=>{n(!1)};return(0,s.jsxs)("div",{children:[(0,s.jsx)(ee.Z,{open:t||o,setOpen:()=>null}),(0,s.jsx)(I.ZP,{variant:"contained",color:"secondary",size:"small",onClick:async()=>{await r(),n(!0)},children:"Edit"}),(0,s.jsxs)(B.ZP,{fullWidth:!0,open:i,onClose:c,children:[(0,s.jsx)(L.ZP,{children:"Edit WeighBridge"}),(0,s.jsx)(U.J9,{initialValues:{name:(null==d?void 0:d.weighbridge[0].name)||"",address:(null==d?void 0:d.weighbridge[0].address)||"",display_name:(null==d?void 0:d.weighbridge[0].display_name)||"",pin_code:(null==d?void 0:d.weighbridge[0].pin_code)||"",phone:(null==d?void 0:d.weighbridge[0].phone)||"",mail:(null==d?void 0:d.weighbridge[0].mail)||""},validationSchema:()=>J.Ry().shape({name:J.Z_().required("Required"),address:J.Z_().required("Required"),display_name:J.Z_().required("Required"),pin_code:J.Z_().required("Required"),phone:J.Z_().required("Required"),mail:J.Z_().required("Required")}),onSubmit:async(i,{setSubmitting:n})=>{n(!0),l({variables:{pkColumns:{id:e},_set:{address:i.address,display_name:i.display_name,pin_code:i.pin_code,name:i.name,phone:i.phone,mail:i.mail}}}),n(!0),c()},children:({submitForm:e,isSubmitting:i,setFieldValue:n})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.ZP,{children:(0,s.jsx)(U.l0,{children:(0,s.jsxs)(H.xu,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"name",type:"text",label:"name"}),(0,s.jsx)(U.gN,{component:G.nv,type:"text",label:"address",name:"address",sx:{my:1}}),(0,s.jsx)(U.gN,{component:G.nv,type:"text",label:"pin code",name:"pin_code",sx:{my:1}}),(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"display_name",type:"text",label:"display name"}),(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"mail",type:"email",label:"mail"}),(0,s.jsx)(T(),{label:"phone",value:null==d?void 0:d.weighbridge[0].phone,variant:"outlined",sx:{my:1},defaultCountry:"in",onChange:e=>n("phone",e.toString())}),(t||o)&&(0,s.jsx)(_.ukE,{}),i&&(0,s.jsx)(_.ukE,{})]})})}),(0,s.jsxs)(M.ZP,{children:[(0,s.jsx)(I.ZP,{onClick:c,children:"Cancel"}),(0,s.jsx)(I.ZP,{onClick:e,children:"confirm"})]})]})})]})]})},re=[{field:"name",headerName:"name",width:150},{field:"address",headerName:"Address",width:300},{field:"display_name",headerName:"display name",width:300},{field:"phone",headerName:"phone",width:150},{field:"mail",headerName:"mail",width:180},{field:"edit",headerName:"Edit",width:75,sortable:!1,filterable:!1,renderCell:e=>(0,s.jsx)(te,{id:e.row.id})},{field:"delete",headerName:"Delete",width:75,sortable:!1,filterable:!1,renderCell:e=>(0,s.jsx)(_.zxk,{variant:"contained",color:"error",size:"small",onClick:()=>{(0,se._1)({title:"Confirm to Delete",message:"Are you sure want to delete this.",buttons:[{label:"Yes",onClick:async()=>{K.B.mutate({mutation:Y.pq,variables:{where:{id:{_eq:e.row.id}}}}).catch((()=>{alert("relation exists so remove the related resources to delete this resource !")}))}},{label:"No",onClick:()=>null}]})},children:"Delete"})},{field:"info",headerName:"Info",width:75,sortable:!1,filterable:!1,renderCell:e=>(0,s.jsx)(_.zxk,{variant:"contained",color:"info",size:"small",onClick:()=>{alert(`Edit ${e.row.id}`)},children:"Info"})}],de=()=>{var e;const[i,n]=a.useState(""),[l,t]=a.useState(1),[r,d]=a.useState(10),{data:o,loading:c}=(0,Y.lx)({variables:{where:{_or:[{display_name:{_ilike:`%${i}%`}},{name:{_ilike:`%${i}%`}}]},offset:(l-1)*r<0?0:(l-1)*r,limit:r}}),{data:h,loading:m}=(0,Y.Bf)({variables:{where:{_or:[{display_name:{_ilike:`%${i}%`}},{name:{_ilike:`%${i}%`}}]}}});return(0,s.jsxs)(H.xu,{children:[(0,s.jsx)(le,{}),(0,s.jsx)(_.nvn,{fullWidth:!0,onChange:e=>{n(e.target.value)},sx:{width:"90%",my:2},name:"search",label:"Search"}),(0,s.jsx)(_.ukE,{sx:{visibility:m||c?"visible":"hidden"}}),(0,s.jsx)(H.xu,{height:500,width:"100%",textAlign:"center",children:!m&&(0,s.jsx)(D._$r,{loading:c,rows:(null==o?void 0:o.weighbridge)||[],paginationMode:"server",columns:re,onPageChange:e=>t(e),onPageSizeChange:e=>d(e),autoPageSize:!0,rowCount:null==h||null==(e=h.weighbridge_aggregate.aggregate)?void 0:e.count,checkboxSelection:!0,disableSelectionOnClick:!0})})]})};var oe=n(95771);const ce=()=>{const[e,i]=a.useState(!1),{data:n,loading:l}=(0,Y._G)(),t=()=>{i(!1)},[r,{loading:d}]=(0,Y.Vh)();return(0,s.jsxs)("div",{children:[(0,s.jsx)(ee.Z,{open:d||l,setOpen:()=>null}),(0,s.jsx)(I.ZP,{variant:"outlined",sx:{m:1},onClick:()=>{i(!0)},children:"NEW STAFF"}),(0,s.jsxs)(B.ZP,{fullWidth:!0,open:e,onClose:t,children:[(0,s.jsx)(L.ZP,{children:"New User"}),(0,s.jsx)(U.J9,{initialValues:{name:"",password:"",address:"",email:"",phone:"",branch:{label:"",value:null},role:"terminal"},validationSchema:()=>J.Ry().shape({name:J.Z_().required("Required"),password:J.Z_().required("Required"),address:J.Z_().required("Required"),email:J.Z_().required("Required"),phone:J.Z_().required("Required"),branch:J.Ry().shape({label:J.Z_().required("Required"),value:J.Z_().required("Required")}).required()}),onSubmit:async(e,{setSubmitting:i})=>{i(!0),r({variables:{objects:[{email:e.email,password:e.password,weighbridge_id:e.branch.value,profile:{name:e.name,phone:e.phone,address:e.address},role:"terminal"}]}}).then((()=>i(!1))).catch((()=>{alert("user already exist"),i(!1)})),t()},children:({submitForm:e,isSubmitting:i,setFieldValue:a,values:l})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.ZP,{children:(0,s.jsx)(U.l0,{children:(0,s.jsxs)(H.xu,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"name",type:"text",label:"name"}),(0,s.jsx)(U.gN,{component:G.nv,type:"password",label:"password",name:"password",sx:{my:1}}),(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"address",type:"text",label:"address"}),(0,s.jsx)(U.gN,{component:G.nv,type:"email",label:"email",name:"email",sx:{my:1}}),(0,s.jsx)(T(),{label:"phone",variant:"outlined",sx:{my:1},defaultCountry:"in",onChange:e=>a("phone",e.toString())}),(0,s.jsx)(U.gN,{component:G.F2,disablePortal:!0,sx:{my:1,mb:3},name:"branch",options:(null==n?void 0:n.weighbridge)||[],renderInput:e=>(0,s.jsx)(oe.default,Object.assign({},e,{label:"Branch"}))}),i&&(0,s.jsx)(_.ukE,{})]})})}),(0,s.jsxs)(M.ZP,{children:[(0,s.jsx)(I.ZP,{onClick:t,children:"Cancel"}),(0,s.jsx)(I.ZP,{onClick:()=>{e()},children:"Add"})]})]})})]})]})},he=({id:e})=>{var i,n;const[l,t]=a.useState(!1),{data:r}=(0,Y.PC)(),[d,{loading:o}]=(0,Y.kD)(),[c,{data:h,loading:m}]=(0,Y.FL)({variables:{where:{id:{_eq:e}}}}),u=()=>{t(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee.Z,{open:o||m,setOpen:()=>null}),(0,s.jsx)(I.ZP,{variant:"contained",color:"secondary",size:"small",onClick:async()=>{await c(),t(!0)},children:"Edit"}),(0,s.jsxs)(B.ZP,{fullWidth:!0,open:l,onClose:u,children:[(0,s.jsx)(L.ZP,{children:"Edit user"}),(0,s.jsx)(U.J9,{initialValues:{name:(null==h?void 0:h.user[0].profile.name)||"",address:(null==h?void 0:h.user[0].profile.address)||"",password:"*****************",email:(null==h?void 0:h.user[0].email)||"",phone:(null==h?void 0:h.user[0].profile.phone)||"",branch:{label:`${null==h||null==(i=h.user[0].weighbridge)?void 0:i.name} - ${null==h||null==(n=h.user[0].weighbridge)?void 0:n.address}`||"",value:(null==h?void 0:h.user[0].weighbridge_id)||""}},validationSchema:()=>J.Ry().shape({name:J.Z_().required("Required"),address:J.Z_().required("Required"),phone:J.Z_().required("Required"),branch:J.Ry().shape({label:J.Z_().required("Required"),value:J.Z_().required("Required")}).required()}),onSubmit:async(i,{setSubmitting:n})=>{n(!0),d({variables:{where:{id:{_eq:e}},set:{weighbridge_id:i.branch.value,profile:{name:i.name,phone:i.phone,address:i.address}}}}).catch((()=>alert("user already exist"))),n(!0),u()},children:({submitForm:e,isSubmitting:i,setFieldValue:n,values:a})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.ZP,{children:(0,s.jsx)(U.l0,{children:(0,s.jsxs)(H.xu,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"name",type:"text",label:"name"}),(0,s.jsx)(U.gN,{component:G.nv,disabled:!0,type:"password",label:"password",name:"password",sx:{my:1}}),(0,s.jsx)(U.gN,{component:G.nv,sx:{my:1},name:"address",type:"text",label:"address"}),(0,s.jsx)(U.gN,{component:G.nv,disabled:!0,type:"email",label:"email",name:"email",sx:{my:1}}),(0,s.jsx)(T(),{label:"phone",value:a.phone,variant:"outlined",sx:{my:1},defaultCountry:"in",onChange:e=>n("phone",e.toString())}),(0,s.jsx)(U.gN,{component:G.F2,disablePortal:!0,sx:{my:1,mb:3},name:"branch",options:(null==r?void 0:r.weighbridge.map((e=>({label:e.name+" - "+e.address,value:e.id}))))||[],renderInput:e=>(0,s.jsx)(oe.default,Object.assign({},e,{label:"Branch"}))}),i&&(0,s.jsx)(_.ukE,{})]})})}),(0,s.jsxs)(M.ZP,{children:[(0,s.jsx)(I.ZP,{onClick:u,children:"Cancel"}),(0,s.jsx)(I.ZP,{onClick:()=>{e()},children:"Add"})]})]})})]})]})},me=[{field:"email",headerName:"Email Address",sortable:!1,width:400},{field:"weighbridge",headerName:"weighbridge",sortable:!1,width:400,valueGetter:e=>e.row.weighbridge.name},{field:"edit",headerName:"Edit",width:75,sortable:!1,filterable:!1,renderCell:e=>(0,s.jsx)(he,{id:e.row.id})},{field:"delete",headerName:"Delete",width:75,sortable:!1,filterable:!1,renderCell:e=>(0,s.jsx)(_.zxk,{variant:"contained",color:"error",size:"small",onClick:()=>{(0,se._1)({title:"Confirm to Delete",message:"Are you sure want to delete this.",buttons:[{label:"Yes",onClick:()=>{K.B.mutate({mutation:Y.sm,variables:{deleteUserByPkId:e.row.id}}).catch((e=>alert("relations exists remove the related resources to delete this resource")))}},{label:"No",onClick:()=>null}]})},children:"Delete"})}],ue=()=>{var e,i;const[n,l]=a.useState(0),[t,r]=a.useState(10),{data:d,loading:o}=(0,Y.WO)({variables:{offset:(n-1)*t<0?0:(n-1)*t,limit:t}}),{data:c,loading:h}=(0,Y.U4)();return(0,s.jsxs)(H.xu,{children:[(0,s.jsx)(ce,{}),(0,s.jsxs)(H.xu,{height:500,width:"100%",textAlign:"center",children:[(0,s.jsx)(_.ukE,{sx:{visibility:o||h?"visible":"hidden"}}),!o&&!h&&(0,s.jsx)(D._$r,{paginationMode:"server",onPageChange:e=>l(e),onPageSizeChange:e=>r(e),disableColumnFilter:!0,rowCount:null==c||null==(e=c.user_aggregate)||null==(i=e.aggregate)?void 0:i.count,disableSelectionOnClick:!0,loading:o,rows:(null==d?void 0:d.user)||[],columns:me,autoPageSize:!0})]})]})},xe=()=>(0,s.jsx)(W,{children:(0,s.jsxs)(l.Z5,{children:[(0,s.jsx)(l.AW,{path:"/",element:(0,s.jsx)(t,{})}),(0,s.jsx)(l.AW,{path:"/weighbridges",element:(0,s.jsx)(de,{})}),(0,s.jsx)(l.AW,{path:"/clients",element:(0,s.jsx)(ae,{})}),(0,s.jsx)(l.AW,{path:"/users",element:(0,s.jsx)(ue,{})})]})})}}]);
(self.webpackChunk=self.webpackChunk||[]).push([[755],{8755:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Fe});var i=a(2784),n=a(14030),l=a.n(n),r=a(96039),s=a.n(r),o=a(10261),d=a.n(o),c=a(96292),u=a.n(c),h=a(77902),m=a.n(h),x=a(26515),g=a.n(x),p=a(63497),b=a.n(p),v={};v.styleTagTransform=g(),v.setAttributes=u(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=m();l()(b(),v);b()&&b().locals&&b().locals;var j=a(32806),f=a(28865),w=a(2533),_=a(44101),y=a(7512),Z=a(48266),S=a(44324),C=a(29438),k=a(62455),I=a(68013),N=a(14606),q=a(57651),W=a(81010),F=a(40234),O=a.n(F),P=a(90047),R=a(52322);const B=i.forwardRef((function(e,t){return(0,R.jsx)(I.Z,Object.assign({direction:"up",ref:t},e))})),Q=({name:e,id:t,setLoading:a})=>{var n;const[l,r]=i.useState(!1),s=()=>{r(!1)},[o,d]=i.useState(null),[c]=(0,_.W7)({variables:{billByPkId:t}}),u=i.useRef();return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(y.ZP,{onClick:async()=>{try{var e,t,i,n,l,o,u,h;a(!0);let s=await c();const m=await(0,q.Jt)((0,q.iH)(W.tO,null==(e=s.data)||null==(t=e.bill_by_pk)?void 0:t.photos[0])),x=await(0,q.Jt)((0,q.iH)(W.tO,null==(i=s.data)||null==(n=i.bill_by_pk)?void 0:n.photos[1])),g=await(0,q.Jt)((0,q.iH)(W.tO,null==(l=s.data)||null==(o=l.bill_by_pk)?void 0:o.photos[2])),p=await(0,q.Jt)((0,q.iH)(W.tO,null==(u=s.data)||null==(h=u.bill_by_pk)?void 0:h.photos[3]));s&&s.data&&s.data.bill_by_pk&&s.data.bill_by_pk.photos&&(s.data.bill_by_pk.photos=[m,x,g,p]),d(s),a(!1),r(!0)}catch(m){s(),a(!1),P.Am.error("can not feth bill details")}},variant:"outlined",size:"small",children:e}),(0,R.jsxs)(Z.ZP,{open:l,TransitionComponent:B,keepMounted:!0,fullWidth:!0,maxWidth:"md",onClose:s,"aria-describedby":"alert-dialog-slide-description",children:[(0,R.jsx)(k.ZP,{}),(0,R.jsx)(C.ZP,{children:(0,R.jsx)("span",{ref:u,children:null!==o&&o?(0,R.jsx)(N.n,{data:null==(n=o.data)?void 0:n.bill_by_pk}):(0,R.jsx)(w.D8x,{})})}),(0,R.jsxs)(S.ZP,{children:[(0,R.jsx)(y.ZP,{onClick:s,children:"close"}),(0,R.jsx)(O(),{content:()=>u.current,trigger:()=>(0,R.jsx)(y.ZP,{children:"print"})})]})]})]})};var D=a(19055),V=a(83703),G=a(35761),E=a(59104),M=a(31689);const U=()=>{var e;const[t,a]=i.useState(10),[n,l]=i.useState(1),[r,s]=i.useState([]),[o,d]=i.useState({}),[c,u]=i.useState([]),[h,m]=i.useState([]),[x,g]=i.useState([]),[p,b]=i.useState(!1),[v,j]=i.useState(!1),{data:y,loading:Z}=(0,_.Np)({variables:{orderBy:o,where:{_and:[{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}},{weighbridge_id:{_eq:localStorage.getItem("x-weighbridge-id")}},...r]},offset:(n-1)*t<0?0:(n-1)*t,limit:t}}),{data:S,loading:C}=(0,_.nG)({variables:{where:{_and:[{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}},{weighbridge_id:{_eq:localStorage.getItem("x-weighbridge-id")}},...r]}}}),[k,{data:I,loading:N}]=(0,_.XH)({variables:{where:{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}},limit:3e3}}),[q,{data:W,loading:F}]=(0,_.vM)(),[O,{data:P,loading:B}]=(0,_.bb)();i.useEffect((()=>{W&&u(W.material)}),[W]),i.useEffect((()=>{I&&m(I.customer)}),[I]),i.useEffect((()=>{P&&g(P.vehicle)}),[P]);const U=i.useRef(null);return i.useEffect((()=>{var e,t;p||(null==(e=U.current)||e.setFieldValue("from","",!1),null==(t=U.current)||t.setFieldValue("to","",!1))}),[p]),(0,R.jsx)(w.xuv,{children:(0,R.jsxs)(w.xuv,{height:600,width:"100%",textAlign:"center",children:[(0,R.jsx)(w.ukE,{sx:{visibility:C||Z||v||C||F||N||B?"visible":"hidden"}}),(0,R.jsx)(D.J9,{innerRef:U,onReset:()=>{s([]),b(!1),d({}),l(1)},onSubmit:(e,{setSubmitting:t})=>{let a=[];e.vehicle_number&&e.vehicle_number.length>0&&(a=[...a,{vehicle_number:{_like:`%${e.vehicle_number}%`}}]),e.vehicle&&e.vehicle.value&&e.vehicle.value.length>0&&(a=[...a,{vehicle_id:{_eq:e.vehicle.value}}]),e.customer&&e.customer.value&&e.customer.value.length>0&&(a=[...a,{_or:[{customer_id:{_eq:e.customer.value}},{customer_2_id:{_eq:e.customer.value}},{customer_3_id:{_eq:e.customer.value}}]}]),e.from&&e.from.length>0&&e.to&&e.to.length>0&&(a=[...a,{created_at:{_gte:new Date(e.from).toISOString(),_lte:new Date(e.to).toISOString()}}]),e.material&&e.material.value&&e.material.value.length>0&&(a=[...a,{material_id:{_eq:e.material.value}}]),t(!1),s(a)},initialValues:{vehicle_number:"",material:null,vehicle:null,customer:null,from:"",to:""},children:({handleSubmit:e,handleReset:t,setFieldValue:a,values:i})=>(0,R.jsxs)("form",{onSubmit:e,onReset:t,children:[(0,R.jsxs)(w.xuv,{display:"flex",flexDirection:"row",children:[(0,R.jsx)(D.gN,{component:V.nv,name:"vehicle_number",onChange:e=>a("vehicle_number",e.target.value.replace(" ","").toUpperCase()),label:"vehicle number",sx:{margin:2,width:"40%"}}),(0,R.jsx)(D.gN,{component:V.F2,name:"material",onChange:(e,t)=>a("material",t),loading:F,onOpen:()=>q({variables:{limit:3e3}}),onInputChange:(e,t)=>{q({variables:{where:{name:{_like:`%${t}%`}},limit:3e3}})},options:c,renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e,{label:"Material"})),sx:{margin:2,width:"40%"}}),(0,R.jsx)(D.gN,{component:V.F2,name:"customer",onChange:(e,t)=>a("customer",t),loading:N,disableClearable:!0,isOptionEqualToValue:(e,t)=>e.value===t.value,onOpen:()=>k({variables:{where:{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}}}}),onInputChange:(e,t)=>{k({variables:{where:{_and:[{name:{_like:`%${t}%`}},{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}}]}}})},options:h,renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e,{label:"customer"})),sx:{margin:2,width:"40%"}}),(0,R.jsx)(D.gN,{component:V.F2,name:"vehicle",loading:B,disableClearable:!0,onChange:(e,t)=>{a("vehicle",t.value)},isOptionEqualToValue:(e,t)=>e.value===t.value,onOpen:()=>O({variables:{limit:3e3}}),onInputChange:(e,t)=>{O({variables:{where:{name:{_like:`%${t}%`}},limit:3e3}})},options:x,renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e,{label:"Vehicle"})),sx:{margin:2,width:"40%"}})]}),(0,R.jsxs)(w.xuv,{display:"flex",alignItems:"flex-start",sx:{ml:1},children:[(0,R.jsx)(w.XZJ,{checked:p,onChange:e=>b(e.target.checked)}),(0,R.jsx)(w.ZT$,{variant:"body2",sx:{ml:1,my:"auto"},children:"filter by time"})]}),p&&(0,R.jsxs)(w.xuv,{display:"flex",gap:"10px",sx:{mt:2,ml:2},flexDirection:"row",children:[(0,R.jsx)(E._,{dateAdapter:G.H,children:(0,R.jsx)(M.x,{renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e)),disableFuture:!0,label:"from date",value:new Date(i.from),onChange:e=>{a("from",(null==e?void 0:e.toISOString())||"")}})}),(0,R.jsx)(E._,{dateAdapter:G.H,children:(0,R.jsx)(M.x,{renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e)),label:"to date",minDateTime:new Date(i.from),disableFuture:!0,value:i.to,onChange:e=>{a("to",(null==e?void 0:e.toISOString())||"")}})})]}),(0,R.jsxs)(w.xuv,{display:"flex",m:1,alignItems:"flex-start",children:[(0,R.jsx)(w.zxk,{type:"submit",children:"submit"}),(0,R.jsx)(w.zxk,{type:"reset",children:"reset"})]})]})}),C?null:(0,R.jsx)(f._$r,{loading:Z||C,onPageChange:e=>l(e),disableColumnFilter:!0,disableColumnMenu:!0,onPageSizeChange:e=>a(e),disableColumnSelector:!0,rows:(null==y?void 0:y.bill)||[],paginationMode:"server",rowCount:null==S||null==(e=S.bill_aggregate.aggregate)?void 0:e.count,columns:[{field:"vehicle_number",headerName:"vehicle number",width:150,editable:!1},{field:"material",headerName:"material",width:100,valueGetter:e=>e.value.name},{field:"customer",headerName:"customer",width:150,valueGetter:e=>e.value&&e.value.name?e.value.name:"null"},{field:"customer_2",headerName:"customer 2",width:150,valueGetter:e=>e.value&&e.value.name?e.value.name:"null"},{field:"customer_3",headerName:"customer 3",width:150,valueGetter:e=>e.value&&e.value.name?e.value.name:"null"},{field:"vehicle",headerName:"vehicle",sortable:!0,width:150,valueGetter:e=>e.value.name},{field:"created_at",headerName:"created At",sortable:!0,width:250,valueGetter:e=>e.value&&new Date(e.value).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",hour12:!0,hour:"numeric",minute:"numeric",second:"numeric",day:"numeric"})||""},{field:"second_weight",headerName:"second weight",sortable:!0,width:110,valueGetter:e=>e.value?"scale weight":"tare weight"},{field:"scale_weight",headerName:"scaleWeight",sortable:!0,width:120},{field:"tare_weight",headerName:"tareWeight",sortable:!0,width:120},{field:"netWeight",headerName:"netWeight",sortable:!0,width:120,valueGetter:e=>Math.abs(parseInt(`${e.row.scale_weight}`,10)-parseInt(`${e.row.tare_weight}`||"0",10)||0)},{field:"info",headerName:"info",sortable:!1,width:120,renderCell:e=>(0,R.jsx)(Q,{setLoading:e=>j(e),name:"info",id:e.row.id})}],autoPageSize:!0,filterMode:"server",onFilterModelChange:e=>s(e),onSortModelChange:e=>d(e),disableSelectionOnClick:!0})]})})},z=i.forwardRef((function(e,t){return(0,R.jsx)(I.Z,Object.assign({direction:"up",ref:t},e))})),A=({open:e,setOpen:t,data:a})=>{const n=async()=>{t(!1)},l=i.useRef();return(0,R.jsxs)(Z.ZP,{sx:{zIndex:"10000"},open:e,TransitionComponent:z,keepMounted:!0,fullWidth:!0,maxWidth:"md",onClose:n,"aria-describedby":"alert-dialog-slide-description",children:[(0,R.jsx)(k.ZP,{}),(0,R.jsx)(C.ZP,{children:e?(0,R.jsx)("span",{ref:l,children:(0,R.jsx)(N.n,{data:a})}):null}),(0,R.jsxs)(S.ZP,{children:[(0,R.jsx)(y.ZP,{onClick:n,children:"close"}),(0,R.jsx)(O(),{content:()=>l.current,trigger:()=>(0,R.jsx)(y.ZP,{children:"print"})})]})]})};var $=a(65413),L=a(6389);const X=({vehicleNumber:e,setWeight:t,setBillRefId:a,setLoading:n})=>{const[l,r]=i.useState([]),[s,o]=i.useState(!1),[d]=(0,_.Yq)(),c=()=>{o(!1)},u=[{field:"id",width:300,headerName:"id",editable:!1},{field:"scale_weight",headerName:"weight",width:300,editable:!1},{field:"created_at",headerName:"created at",width:400,valueGetter:e=>new Date(e.value).toLocaleString(),editable:!1},{field:"select",headerName:"select",renderCell:e=>(0,R.jsx)(y.ZP,{onClick:()=>{n(!0),t(e.row.scale_weight||0),a(e.row.id),n(!1),c()},variant:"outlined",size:"small",children:"select"})}];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(y.ZP,{variant:"outlined",sx:{m:1,width:"60%"},onClick:()=>{(async()=>{await d({variables:{where:{vehicle_number:{_eq:e}},limit:50}}).then((e=>{var t;null==(t=e.data)||t.bill.map((e=>{r([...l,{id:e.id,created_at:e.created_at,scale_weight:e.scale_weight}])}))})),o(!0)})()},children:"select weight"}),(0,R.jsxs)(Z.ZP,{maxWidth:"xl",fullWidth:!0,open:s,onClose:c,children:[(0,R.jsx)(k.ZP,{children:"select weight"}),(0,R.jsx)(C.ZP,{children:(0,R.jsx)(L.xu,{height:"500px",children:(0,R.jsx)(f._$r,{rows:l,columns:u})})}),(0,R.jsx)(S.ZP,{children:(0,R.jsx)(y.ZP,{onClick:c,children:"Cancel"})})]})]})};var J=a(39304),H=a(28709),T=a.n(H);const Y=i.forwardRef((function(e,t){return(0,R.jsx)(I.Z,Object.assign({direction:"up",ref:t},e))})),K=({setData1:e,setData2:t,setData3:a,setData4:n,submitting:l})=>{const[r,s]=i.useState(!1),o=()=>{s(!1)},[d,c]=i.useState([]),[u,h]=i.useState([]);let m=i.useRef([]);m.current=[0,0,0,0].map(((e,t)=>m.current[t]=i.createRef()));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(y.ZP,{disabled:l,sx:{margin:2,width:"90%"},onClick:async()=>{await navigator.mediaDevices.getUserMedia({video:!0}).then((async e=>{await navigator.mediaDevices.enumerateDevices().then((e=>{if(e.length<4)alert("at least 4 cameras are required");else{const t=e.filter((e=>"videoinput"===e.kind));console.log(t),c(t),s(!0)}}))}))},variant:"outlined",size:"small",children:"capture"}),(0,R.jsxs)(Z.ZP,{open:r,TransitionComponent:Y,keepMounted:!0,fullWidth:!0,maxWidth:"xl",onClose:o,children:[(0,R.jsx)(w.$N8,{children:"select any four images"}),(0,R.jsx)(C.ZP,{children:d.length>0&&d.map(((e,t)=>(0,R.jsx)(T(),{audio:!1,onClick:()=>{u.includes(t)?h(u.filter((e=>e!==t))):!(u.length>=4)&&h([...u,t])},style:{border:u.includes(t)?"4px solid red":"",padding:"10px",margin:"3px"},videoConstraints:{aspectRatio:1,deviceId:{exact:e.deviceId}},height:340,ref:m.current[t],screenshotFormat:"image/jpeg",width:340},e.deviceId)))}),(0,R.jsxs)(S.ZP,{children:[(0,R.jsx)(y.ZP,{onClick:o,children:"close"}),(0,R.jsx)(y.ZP,{style:{display:u.length>=4?"flex":"none"},onClick:async()=>{await Promise.all(u.map((e=>m.current[e].current.getScreenshot()))).then((i=>{e(i[0]),t(i[1]),a(i[2]),n(i[3]),h([]),o()}))},variant:"contained",color:"primary",children:"submit"})]})]})]})},ee=()=>{const[e,{data:t,loading:a}]=(0,_.XH)({variables:{where:{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}},limit:3e3}}),[n,l]=(0,i.useState)([]),[r,s]=(0,i.useState)([]),[o,d]=(0,i.useState)([]),[c,{data:u,loading:h}]=(0,_.vM)(),[m,{data:x,loading:g}]=(0,_.bb)(),[p]=(0,_.sy)(),[b,v]=(0,i.useState)(),[j,f]=(0,i.useState)(!1),[y,Z]=(0,i.useState)(null),[S,C]=(0,i.useState)(null),[k,I]=(0,i.useState)(null),[N,F]=(0,i.useState)(null),[O,B]=(0,i.useState)(null),[Q,G]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{u&&l(u.material)}),[u]),(0,i.useEffect)((()=>{t&&s(t.customer)}),[t]),(0,i.useEffect)((()=>{x&&d(x.vehicle)}),[x]),(0,R.jsxs)(R.Fragment,{children:[Q&&(0,R.jsx)(w.ukE,{sx:{mx:"10px"}}),(0,R.jsx)(D.J9,{initialValues:{vehicleNumber:"",material:null,vehicle:null,buyer:null,seller:null,trader:null,secondWeight:!1,charges:0,scaleWeight:0,tareWeight:0,paidBy:"other"},validationSchema:()=>$.Ry().shape({vehicleNumber:$.Z_().required("Required"),material:$.Ry().shape({value:$.Z_().required("Required"),label:$.Z_().required("Required")}).required(),vehicle:$.Ry().shape({value:$.Z_().required("Required"),label:$.Z_().required("Required")}).required(),charges:$.Rx().required(),scaleWeight:$.Rx().required("Required"),tareWeight:$.Vo((e=>e.secondWeight?$.Z_().required("Required"):$.Rx())),buyer:$.Ry().shape({value:$.Z_().required("Required"),label:$.Z_().required("Required")})}),onSubmit:async(e,{setSubmitting:t,resetForm:a})=>{t(!0);try{var i;const n=(0,J.v4)();let l=Object.assign({},e);e.secondWeight||(l.tareWeight=null);const r=await(null==(i=W.I8.currentUser)?void 0:i.getIdTokenResult()),s=null==r?void 0:r.claims["https://hasura.io/jwt/claims"],o=`${s["x-hasura-tenent-id"]}/${s["x-hasura-weighbridge-id"]}/${n}-folder/one.jpeg`,d=`${s["x-hasura-tenent-id"]}/${s["x-hasura-weighbridge-id"]}/${n}-folder/two.jpeg`,c=`${s["x-hasura-tenent-id"]}/${s["x-hasura-weighbridge-id"]}/${n}-folder/three.jpeg`,u=`${s["x-hasura-tenent-id"]}/${s["x-hasura-weighbridge-id"]}/${n}-folder/four.jpeg`,h=await(0,q.sf)((0,q.iH)(W.tO,o),S,"data_url"),m=await(0,q.sf)((0,q.iH)(W.tO,d),k,"data_url"),x=await(0,q.sf)((0,q.iH)(W.tO,c),N,"data_url"),g=await(0,q.sf)((0,q.iH)(W.tO,u),O,"data_url"),v=e;await p({variables:{object:{id:n,photos:[h.ref.fullPath,m.ref.fullPath,x.ref.fullPath,g.ref.fullPath],charges:e.charges,vehicle_id:v.vehicle.value,material_id:v.material.value,vehicle_number:e.vehicleNumber,customer_id:v.buyer.value,customer_2_id:v.seller.value,customer_3_id:v.trader.value,scale_weight:e.scaleWeight,tare_weight:e.secondWeight?e.tareWeight:0,second_weight:e.secondWeight,reference_bill_id:e.secondWeight?b:null,paid_by:e.paidBy}}}).catch((()=>{(0,q.oq)(h.ref),(0,q.oq)(m.ref),(0,q.oq)(x.ref),(0,q.oq)(g.ref)})).then((e=>{var i;let n=null==e||null==(i=e.data)?void 0:i.insert_bill_one;n.photos=[S,k,N,O],Z(n),f(!0),C(null),I(null),F(null),B(null),t(!1),P.Am.success("Bill Added Successfully"),a()}))}catch(n){t(!1)}},children:({submitForm:t,isSubmitting:i,setFieldValue:l,values:s,isValid:d,resetForm:u})=>(0,R.jsxs)(w.xuv,{component:"form",sx:{display:"flex",flexDirection:"row"},noValidate:!0,autoComplete:"off",children:[(0,R.jsxs)(w.xuv,{sx:{flexDirection:"column",width:"50%",display:"flex",height:"100%"},children:[(0,R.jsx)(D.gN,{component:V.nv,autoFocus:!0,name:"vehicleNumber",onChange:e=>l("vehicleNumber",e.target.value.replace(" ","").toUpperCase()),label:"vehicle number",sx:{margin:2,width:"90%"}}),(0,R.jsx)(K,{submitting:i,setData1:C,setData2:I,setData3:F,setData4:B}),(0,R.jsxs)(w.xuv,{flex:1,flexDirection:"column",children:[S&&(0,R.jsx)("img",{style:{margin:"10px",width:"100px"},src:S,alt:"photo1"}),k&&(0,R.jsx)("img",{style:{margin:"10px",width:"100px"},src:k,alt:"photo1"}),N&&(0,R.jsx)("img",{style:{margin:"10px",width:"100px"},src:N,alt:"photo1"}),O&&(0,R.jsx)("img",{style:{margin:"10px",width:"100px"},src:O,alt:"photo1"})]}),(0,R.jsx)(D.gN,{component:V.F2,name:"material",loading:h,disableClearable:!0,isOptionEqualToValue:(e,t)=>e.value===t.value,onOpen:()=>c({variables:{limit:3e3}}),onInputChange:(e,t)=>{c({variables:{where:{name:{_like:`%${t}%`}},limit:3e3}})},options:n,renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e,{label:"Material"})),sx:{margin:2,width:"90%"}}),(0,R.jsx)(D.gN,{component:V.F2,name:"buyer",loading:a,disableClearable:!0,isOptionEqualToValue:(e,t)=>e.value===t.value,onOpen:()=>e({variables:{where:{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}},limit:3e3}}),onInputChange:(t,a)=>{e({variables:{where:{_and:[{name:{_like:`%${a}%`}},{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}}]},limit:3e3}})},options:r,renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e,{label:"buyer"})),sx:{margin:2,width:"90%"}}),(0,R.jsx)(D.gN,{component:V.F2,name:"seller",loading:a,disableClearable:!0,isOptionEqualToValue:(e,t)=>e.value===t.value,onOpen:()=>e({variables:{where:{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}},limit:3e3}}),onInputChange:(t,a)=>{e({variables:{where:{_and:[{name:{_like:`%${a}%`}},{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}}]},limit:3e3}})},options:r,renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e,{label:"seller"})),sx:{margin:2,width:"90%"}}),(0,R.jsx)(D.gN,{component:V.F2,name:"trader",loading:a,disableClearable:!0,isOptionEqualToValue:(e,t)=>e.value===t.value,onOpen:()=>e({variables:{where:{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}},limit:3e3}}),onInputChange:(t,a)=>{e({variables:{where:{_and:[{name:{_like:`%${a}%`}},{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}}]},limit:3e3}})},options:r,renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e,{label:"trader"})),sx:{margin:2,width:"90%"}}),(0,R.jsxs)(w.xuv,{children:[(0,R.jsx)(w.lXp,{children:"second weight or tare weight"}),(0,R.jsx)(D.gN,{component:V.rs,type:"checkbox",name:"secondWeight"})]}),(0,R.jsxs)(w.xuv,{sx:{margin:2,width:"90%"},children:[(0,R.jsx)(w.lXp,{children:"paid by"}),(0,R.jsxs)(D.gN,{component:V.Ee,row:!0,name:"paidBy",children:[s.buyer&&(0,R.jsx)(w.D8G,{value:"buyer",control:(0,R.jsx)(w.Y8K,{}),label:"buyer"}),s.trader&&(0,R.jsx)(w.D8G,{value:"trader",control:(0,R.jsx)(w.Y8K,{}),label:"trader"}),s.seller&&(0,R.jsx)(w.D8G,{value:"seller",control:(0,R.jsx)(w.Y8K,{}),label:"seller"}),(0,R.jsx)(w.D8G,{value:"driver",control:(0,R.jsx)(w.Y8K,{}),label:"driver"}),(0,R.jsx)(w.D8G,{value:"other",control:(0,R.jsx)(w.Y8K,{}),label:"other"})]})]})]}),(0,R.jsxs)(w.xuv,{sx:{width:"50%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,R.jsx)(D.gN,{component:V.nv,name:"scaleWeight",label:"scale weight",sx:{m:2,width:"90%"},InputProps:{endAdornment:(0,R.jsx)(w.oGm,{position:"start",children:"kg"})}}),s.secondWeight&&(0,R.jsxs)(w.xuv,{sx:{m:1,width:"90%",display:"flex"},children:[(0,R.jsx)(X,{setLoading:e=>G(e),setWeight:e=>{l("tareWeight",e)},setBillRefId:e=>{v(e)},vehicleNumber:s.vehicleNumber}),(0,R.jsx)(D.gN,{component:V.nv,label:"Tare weight",InputProps:{endAdornment:(0,R.jsx)(w.oGm,{position:"start",children:"kg"})},name:"tareWeight",sx:{m:1,width:"50%"}})]}),(0,R.jsx)(D.gN,{component:V.F2,name:"vehicle",loading:g,disableClearable:!0,onChange:(e,t)=>{l("vehicle",{value:t.value,label:t.label})},isOptionEqualToValue:(e,t)=>e.value===t.value,onOpen:()=>m({variables:{limit:3e3}}),onInputChange:(e,t)=>{m({variables:{where:{name:{_like:`%${t}%`}},limit:3e3}})},options:o,renderInput:e=>(0,R.jsx)(w.nvn,Object.assign({},e,{label:"Vehicle"})),sx:{margin:2,width:"90%"}}),(0,R.jsx)(D.gN,{component:V.nv,name:"charges",type:"number",sx:{margin:2,width:"90%"}}),(0,R.jsxs)(w.xuv,{sx:{margin:2,width:"90%",justifyContent:"end",display:"flex"},children:[d&&S&&k&&N&&N&&(0,R.jsx)(w.zxk,{sx:{marginRight:2},onClick:()=>t(),variant:"contained",color:"success",children:"ACCEPT"}),(0,R.jsx)(w.zxk,{variant:"contained",onClick:()=>u(),color:"error",children:"RESET"})]})]})]})}),(0,R.jsx)(A,{data:y,open:j,setOpen:f})]})};var te=a(69740),ae=a(27591),ie=a(73786),ne=a(95995),le=a(74760),re=a(18281),se=a(20268),oe=a(43663),de=a(5919),ce=a(34766),ue=a(42603),he=a(49001),me=a(28319),xe=a(22082),ge=a(42981),pe=a(8664),be=a(90288),ve=a(30808),je=a(12695);const fe=240,we=e=>({width:fe,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),_e=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:`calc(${e.spacing(7)} + 1px)`,[e.breakpoints.up("sm")]:{width:`calc(${e.spacing(8)} + 1px)`}}),ye=(0,te.zo)("div")((({theme:e})=>Object.assign({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar))),Ze=(0,te.zo)(ne.ZP,{shouldForwardProp:e=>"open"!==e})((({theme:e,open:t})=>Object.assign({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},t&&{marginLeft:fe,width:"calc(100% - 240px)",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}))),Se=(0,te.zo)(ie.ZP,{shouldForwardProp:e=>"open"!==e})((({theme:e,open:t})=>Object.assign({width:fe,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},t&&Object.assign({},we(e),{"& .MuiDrawer-paper":we(e)}),!t&&Object.assign({},_e(e),{"& .MuiDrawer-paper":_e(e)})))),Ce=({children:e})=>{var t,a;const[n,l]=(0,i.useState)(null),r=(0,j.s0)(),s=(0,te.Fg)(),[o,d]=i.useState(!1),c=[{name:"Home",path:"/",icon:ve.SK8,active:(0,j.bS)("/")},{name:"report",path:"/report",icon:je.Z,active:(0,j.bS)("/report")},{name:"clients",path:"/clients",icon:be.Z,active:(0,j.bS)("/clients")}];return(0,R.jsxs)(ae.Z,{sx:{display:"flex"},children:[(0,R.jsx)(se.Z,{}),(0,R.jsx)(Ze,{position:"fixed",open:o,children:(0,R.jsxs)(le.ZP,{children:[(0,R.jsx)(ce.default,{color:"inherit","aria-label":"open drawer",onClick:()=>{d(!0)},edge:"start",sx:Object.assign({marginRight:5},o&&{display:"none"}),children:(0,R.jsx)(ue.Z,{})}),(0,R.jsx)(oe.ZP,{variant:"h6",noWrap:!0,component:"div",children:"INFRA WEIGH"}),(0,R.jsxs)(ae.Z,{sx:{marginLeft:"auto",flexGrow:0},children:[(0,R.jsx)(w.v2r,{sx:{mt:"45px"},anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(n),onClose:()=>{l(null)},children:(0,R.jsx)(w.sNh,{onClick:()=>{(0,P.Am)("Logging out...",{}),setTimeout((()=>{W.I8.signOut(),window.location.reload()}),1e3)},children:(0,R.jsx)(oe.ZP,{textAlign:"center",children:"log out"})},"logOut")}),(0,R.jsx)(w.ua7,{title:(null==(t=W.I8.currentUser)?void 0:t.displayName)+"",children:(0,R.jsx)(ce.default,{onClick:e=>{l(e.currentTarget)},sx:{p:0},children:(0,R.jsx)(w.qEK,{src:(null==W.I8||null==(a=W.I8.currentUser)?void 0:a.photoURL)+""})})})]})]})}),(0,R.jsxs)(Se,{variant:"permanent",open:o,children:[(0,R.jsx)(ye,{children:(0,R.jsx)(ce.default,{onClick:()=>{d(!1)},children:"rtl"===s.direction?(0,R.jsx)(me.Z,{}):(0,R.jsx)(he.Z,{})})}),(0,R.jsx)(de.default,{}),(0,R.jsx)(re.ZP,{children:c.map(((e,t)=>(0,R.jsxs)(xe.ZP,{onClick:()=>r(e.path),sx:{":hover":{backgroundColor:e.active?"slategray":"whitesmoke"},backgroundColor:e.active?"gray":"inherit",backgroundOpacity:50,margin:1,borderRadius:"5px",minHeight:48,justifyContent:o?"initial":"center",px:2.5},children:[(0,R.jsx)(ge.ZP,{sx:{minWidth:0,mr:o?3:"auto",justifyContent:"center"},children:(0,R.jsx)(e.icon,{htmlColor:e.active?"white":"gray"})}),(0,R.jsx)(pe.ZP,{primary:e.name,sx:{color:e.active?"white":"inherit",opacity:o?1:0}})]},t)))})]}),(0,R.jsx)(ae.Z,{component:"main",sx:{flexGrow:1,p:3,mt:7},children:e})]})};var ke=a(47622),Ie=a.n(ke);const Ne=()=>{const[e,t]=i.useState(!1),a=()=>{t(!1)},[n,{loading:l}]=(0,_.Nv)();return(0,R.jsxs)("div",{children:[(0,R.jsx)(y.ZP,{variant:"outlined",sx:{m:1},onClick:()=>{t(!0)},children:"new client"}),(0,R.jsxs)(Z.ZP,{fullWidth:!0,open:e,onClose:a,children:[l&&(0,R.jsx)(w.ukE,{}),(0,R.jsx)(k.ZP,{children:"New Client"}),(0,R.jsx)(D.J9,{initialValues:{name:"",address:"",email:"",phone:"",gst_in:"",company_name:"",credit:!1,credit_limit:0,branch:{value:null,label:""}},validationSchema:()=>$.Ry().shape({name:$.Z_().required("Required"),address:$.Z_().required("Required"),email:$.Z_().required("Required"),phone:$.Z_().required("Required"),company_name:$.Z_().required("Required"),credit_limit:$.Z_()}),onSubmit:async(e,{setSubmitting:t})=>{t(!0),n({variables:{object:{name:e.name,email:e.email,phone:e.phone,gst_in:e.gst_in,blocked:!1,company_name:e.company_name,company_address:e.address,credit:e.credit,credit_limit:e.credit_limit}}}).catch((()=>{P.Am.error("can not create new client"),t(!1)})).then((()=>{a(),P.Am.success("client created successfully")})),t(!1)},children:({submitForm:e,isSubmitting:t,setFieldValue:i})=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(C.ZP,{children:(0,R.jsx)(D.l0,{children:(0,R.jsxs)(L.xu,{sx:{display:"flex",flexDirection:"column"},children:[(0,R.jsx)(D.gN,{component:V.nv,sx:{my:1},name:"name",type:"text",label:"name"}),(0,R.jsx)(D.gN,{component:V.nv,sx:{my:1},name:"company_name",type:"text",label:"company name"}),(0,R.jsx)(D.gN,{component:V.nv,sx:{my:1},name:"gst_in",type:"text",label:"gst number"}),(0,R.jsxs)(L.xu,{children:[(0,R.jsx)(w.lXp,{children:"credit facility"}),(0,R.jsx)(D.gN,{component:V.rs,type:"checkbox",name:"credit"})]}),(0,R.jsx)(D.gN,{component:V.nv,type:"text",label:"credit limit",name:"credit_limit",sx:{my:1}}),(0,R.jsx)(D.gN,{component:V.nv,type:"text",label:"address",name:"address",sx:{my:1}}),(0,R.jsx)(D.gN,{component:V.nv,type:"email",label:"email",name:"email",sx:{my:1}}),(0,R.jsx)(Ie(),{label:"phone",variant:"outlined",countryCodeEditable:!1,sx:{my:1},defaultCountry:"in",onChange:e=>i("phone",e.toString())}),t&&(0,R.jsx)(w.ukE,{})]})})}),(0,R.jsxs)(S.ZP,{children:[(0,R.jsx)(y.ZP,{onClick:a,children:"Cancel"}),(0,R.jsx)(y.ZP,{onClick:()=>{e()},children:"Add"})]})]})})]})]})};a(51294);const qe=[{field:"name",headerName:"name",width:300,editable:!1,sortable:!0},{field:"company_address",headerName:"Address",sortable:!1,width:300},{field:"company_name",headerName:"company",sortable:!1,width:200},{field:"phone",headerName:"phone",sortable:!1,width:150},{field:"email",headerName:"e-mail id",sortable:!1,width:250}],We=()=>{var e;const[t,a]=i.useState(""),[n,l]=i.useState(1),[r,s]=i.useState(1),{data:o,loading:d}=(0,_.bL)({variables:{where:{_and:[{_or:[{name:{_like:`%${t}%`}},{company_name:{_like:`%${t}%`}}]},{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}}]},offset:(n-1)*r<0?0:(n-1)*r,limit:r}}),{data:c,loading:u}=(0,_.aP)({variables:{where:{_and:[{_or:[{name:{_like:`%${t}%`}},{company_name:{_like:`%${t}%`}}]},{tenent_id:{_eq:localStorage.getItem("x-tenent-id")}}]}}});return(0,R.jsxs)(L.xu,{children:[(0,R.jsx)(Ne,{}),(0,R.jsx)(w.nvn,{fullWidth:!0,onChange:e=>{a(e.target.value)},sx:{width:"90%",my:2},name:"search",label:"Search"}),(0,R.jsxs)(L.xu,{height:500,width:"100%",textAlign:"center",children:[(0,R.jsx)(w.ukE,{sx:{visibility:u||d?"visible":"hidden"}}),!u&&(0,R.jsx)(f._$r,{loading:d,rows:(null==o?void 0:o.customer)||[],columns:qe,rowCount:null==c||null==(e=c.customer_aggregate.aggregate)?void 0:e.count,paginationMode:"server",onPageChange:e=>l(e),onPageSizeChange:e=>s(e),autoPageSize:!0,checkboxSelection:!0,disableSelectionOnClick:!0})]})]})},Fe=()=>(0,R.jsx)(Ce,{children:(0,R.jsxs)(j.Z5,{children:[(0,R.jsx)(j.AW,{path:"/",element:(0,R.jsx)(ee,{})}),(0,R.jsx)(j.AW,{path:"/report",element:(0,R.jsx)(U,{})}),(0,R.jsx)(j.AW,{path:"/clients",element:(0,R.jsx)(We,{})})]})})},63497:e=>{e.exports=[[e.id,".App{text-align:center}.App-logo{height:40vmin;pointer-events:none}@media(prefers-reduced-motion: no-preference){.App-logo{animation:App-logo-spin infinite 20s linear}}.App-header{background-color:#282c34;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:calc(10px + 2vmin);color:#fff}.App-link{color:#61dafb}@keyframes App-logo-spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEtBQUssaUJBQWlCLENBQUMsVUFBVSxhQUFhLENBQUMsbUJBQW1CLENBQUMsOENBQThDLFVBQVUsMkNBQTJDLENBQUMsQ0FBQyxZQUFZLHdCQUF3QixDQUFDLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQyxrQkFBa0IsQ0FBQyxzQkFBc0IsQ0FBQyw0QkFBNEIsQ0FBQyxVQUFVLENBQUMsVUFBVSxhQUFhLENBQUMseUJBQXlCLEtBQUssc0JBQXNCLENBQUMsR0FBRyx3QkFBd0IsQ0FBQyIsImZpbGUiOiJBcHAuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5BcHB7dGV4dC1hbGlnbjpjZW50ZXJ9LkFwcC1sb2dve2hlaWdodDo0MHZtaW47cG9pbnRlci1ldmVudHM6bm9uZX1AbWVkaWEocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogbm8tcHJlZmVyZW5jZSl7LkFwcC1sb2dve2FuaW1hdGlvbjpBcHAtbG9nby1zcGluIGluZmluaXRlIDIwcyBsaW5lYXJ9fS5BcHAtaGVhZGVye2JhY2tncm91bmQtY29sb3I6IzI4MmMzNDttaW4taGVpZ2h0OjEwMHZoO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Zm9udC1zaXplOmNhbGMoMTBweCArIDJ2bWluKTtjb2xvcjojZmZmfS5BcHAtbGlua3tjb2xvcjojNjFkYWZifUBrZXlmcmFtZXMgQXBwLWxvZ28tc3Bpbntmcm9te3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9dG97dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX0iXX0= */","",""]]}}]);
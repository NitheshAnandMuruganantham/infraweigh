(self.webpackChunk=self.webpackChunk||[]).push([[776],{18776:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>we});var i=t(5334),a=t(46062),l=t.n(a),r=t(44036),s=t.n(r),o=t(96793),c=t.n(o),d=t(17892),u=t.n(d),h=t(11173),m=t.n(h),x=t(42464),g=t.n(x),p=t(4678),b=t.n(p),v={};v.styleTagTransform=g(),v.setAttributes=u(),v.insert=c().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=m();l()(b(),v);b()&&b().locals&&b().locals;var j=t(32806),f=t(2784),w=t(69740),y=t(27591),I=t(73786),C=t(95995),Z=t(74760),F=t(18281),k=t(20268),S=t(43663),G=t(5919),B=t(34766),O=t(42603),Q=t(49001),_=t(28319),U=t(22082),H=t(42981),X=t(8664),W=t(2533),N=t(81010),R=t(62781),V=t(33229),A=t(15413),z=t(52322);const J=240,M=[{name:"Logout",exec:()=>{N.I8.signOut(),window.location.replace("/")}}],D=e=>({width:J,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),P=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:`calc(${e.spacing(7)} + 1px)`,[e.breakpoints.up("sm")]:{width:`calc(${e.spacing(8)} + 1px)`}}),Y=(0,w.zo)("div")((({theme:e})=>Object.assign({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar))),L=(0,w.zo)(C.ZP,{shouldForwardProp:e=>"open"!==e})((({theme:e,open:n})=>Object.assign({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},n&&{marginLeft:J,width:"calc(100% - 240px)",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}))),E=(0,w.zo)(I.ZP,{shouldForwardProp:e=>"open"!==e})((({theme:e,open:n})=>Object.assign({width:J,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},n&&Object.assign({},D(e),{"& .MuiDrawer-paper":D(e)}),!n&&Object.assign({},P(e),{"& .MuiDrawer-paper":P(e)})))),T=({children:e})=>{var n,t;const[i,a]=(0,f.useState)(null),l=(0,j.s0)(),r=(0,w.Fg)(),[s,o]=f.useState(!1),c=[{name:"Home",path:"/",icon:V.Z,active:(0,j.bS)("/")},{name:"Bills",path:"/bills",icon:A.Z,active:(0,j.bS)("/bills")},{name:"Weighbridges",path:"/weighbridges",icon:R.Z,active:(0,j.bS)("/weighbridges")}];return(0,z.jsxs)(y.Z,{sx:{display:"flex"},children:[(0,z.jsx)(k.Z,{}),(0,z.jsx)(L,{position:"fixed",open:s,children:(0,z.jsxs)(Z.ZP,{children:[(0,z.jsx)(B.default,{color:"inherit","aria-label":"open drawer",onClick:()=>{o(!0)},edge:"start",sx:Object.assign({marginRight:5},s&&{display:"none"}),children:(0,z.jsx)(O.Z,{})}),(0,z.jsx)(S.ZP,{variant:"h6",noWrap:!0,component:"div",children:"INFRA WEIGH"}),(0,z.jsxs)(y.Z,{sx:{marginLeft:"auto",flexGrow:0},children:[(0,z.jsx)(W.v2r,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(i),onClose:()=>{a(null)},children:M.map((e=>(0,z.jsx)(W.sNh,{onClick:e.exec,children:(0,z.jsx)(S.ZP,{textAlign:"center",children:e.name})},e.name)))}),(0,z.jsx)(W.ua7,{title:(null==(n=N.I8.currentUser)?void 0:n.displayName)+"",children:(0,z.jsx)(B.default,{onClick:e=>{a(e.currentTarget)},sx:{p:0},children:(0,z.jsx)(W.qEK,{src:(null==N.I8||null==(t=N.I8.currentUser)?void 0:t.photoURL)+""})})})]})]})}),(0,z.jsxs)(E,{variant:"permanent",open:s,children:[(0,z.jsx)(Y,{children:(0,z.jsx)(B.default,{onClick:()=>{o(!1)},children:"rtl"===r.direction?(0,z.jsx)(_.Z,{}):(0,z.jsx)(Q.Z,{})})}),(0,z.jsx)(G.default,{}),(0,z.jsx)(F.ZP,{children:c.map(((e,n)=>(0,z.jsxs)(U.ZP,{onClick:()=>l(e.path),sx:{":hover":{backgroundColor:e.active?"slategray":"whitesmoke"},backgroundColor:e.active?"gray":"inherit",backgroundOpacity:50,margin:1,borderRadius:"5px",minHeight:48,justifyContent:s?"initial":"center",px:2.5},children:[(0,z.jsx)(H.ZP,{sx:{minWidth:0,mr:s?3:"auto",justifyContent:"center"},children:(0,z.jsx)(e.icon,{htmlColor:e.active?"white":"gray"})}),(0,z.jsx)(X.ZP,{primary:e.name,sx:{color:e.active?"white":"inherit",opacity:s?1:0}})]},n)))})]}),(0,z.jsx)(y.Z,{component:"main",sx:{flexGrow:1,p:3,mt:7},children:e})]})},$=()=>(0,z.jsx)("h1",{children:"hello"});var q=t(28865),K=t(44101),ee=t(7512),ne=t(48266),te=t(44324),ie=t(29438),ae=t(62455),le=t(68013),re=t(14606),se=t(57651),oe=t(40234),ce=t.n(oe),de=t(90047);const ue=f.forwardRef((function(e,n){return(0,z.jsx)(le.Z,Object.assign({direction:"up",ref:n},e))})),he=({name:e,id:n,setLoading:t})=>{var i;const[a,l]=f.useState(!1),r=()=>{l(!1)},[s,o]=f.useState(null),[c]=(0,K.W7)({variables:{billByPkId:n}}),d=f.useRef();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ee.ZP,{onClick:async()=>{try{var e,n,i,a,s,d,u,h;t(!0);let r=await c();const m=await(0,se.Jt)((0,se.iH)(N.tO,null==(e=r.data)||null==(n=e.bill_by_pk)?void 0:n.photos[0])),x=await(0,se.Jt)((0,se.iH)(N.tO,null==(i=r.data)||null==(a=i.bill_by_pk)?void 0:a.photos[1])),g=await(0,se.Jt)((0,se.iH)(N.tO,null==(s=r.data)||null==(d=s.bill_by_pk)?void 0:d.photos[2])),p=await(0,se.Jt)((0,se.iH)(N.tO,null==(u=r.data)||null==(h=u.bill_by_pk)?void 0:h.photos[3]));r&&r.data&&r.data.bill_by_pk&&r.data.bill_by_pk.photos&&(r.data.bill_by_pk.photos=[m,x,g,p]),o(r),t(!1),l(!0)}catch(m){r(),t(!1),de.Am.error("can not feth bill details")}},variant:"outlined",size:"small",children:e}),(0,z.jsxs)(ne.ZP,{open:a,TransitionComponent:ue,keepMounted:!0,fullWidth:!0,maxWidth:"md",onClose:r,"aria-describedby":"alert-dialog-slide-description",children:[(0,z.jsx)(ae.ZP,{}),(0,z.jsx)(ie.ZP,{children:(0,z.jsx)("span",{ref:d,children:null!==s&&s?(0,z.jsx)(re.n,{data:null==(i=s.data)?void 0:i.bill_by_pk}):(0,z.jsx)(W.D8x,{})})}),(0,z.jsxs)(te.ZP,{children:[(0,z.jsx)(ee.ZP,{onClick:r,children:"close"}),(0,z.jsx)(ce(),{content:()=>d.current,trigger:()=>(0,z.jsx)(ee.ZP,{children:"print"})})]})]})]})};var me=t(19055),xe=t(83703),ge=t(35761),pe=t(59104),be=t(31689);const ve=()=>{var e;const[n,t]=f.useState(10),[i,a]=f.useState(1),[l,r]=f.useState([]),[s,o]=f.useState({}),[c,d]=f.useState([]),[u,h]=f.useState([]),[m,x]=f.useState(!1),[g,p]=f.useState(!1),{data:b,loading:v}=(0,K.Np)({variables:{orderBy:s,where:{_and:[...l]},offset:(i-1)*n<0?0:(i-1)*n,limit:n}}),{data:j,loading:w}=(0,K.nG)({variables:{where:{_and:[...l]}}}),[y,{data:I,loading:C}]=(0,K.vM)(),[Z,{data:F,loading:k}]=(0,K.bb)();f.useEffect((()=>{I&&d(I.material)}),[I]),f.useEffect((()=>{F&&h(F.vehicle)}),[F]);const S=f.useRef(null);return f.useEffect((()=>{var e,n;m||(null==(e=S.current)||e.setFieldValue("from","",!1),null==(n=S.current)||n.setFieldValue("to","",!1))}),[m]),(0,z.jsx)(W.xuv,{children:(0,z.jsxs)(W.xuv,{height:600,width:"100%",textAlign:"center",children:[(0,z.jsx)(W.ukE,{sx:{visibility:w||v||g||w||C||k?"visible":"hidden"}}),(0,z.jsx)(me.J9,{innerRef:S,onReset:()=>{r([]),x(!1),o({}),a(1)},onSubmit:(e,{setSubmitting:n})=>{let t=[];e.vehicle_number&&e.vehicle_number.length>0&&(t=[...t,{vehicle_number:{_like:`%${e.vehicle_number}%`}}]),e.vehicle&&e.vehicle.value&&e.vehicle.value.length>0&&(t=[...t,{vehicle_id:{_eq:e.vehicle.value}}]),e.from&&e.from.length>0&&e.to&&e.to.length>0&&(t=[...t,{created_at:{_gte:new Date(e.from).toISOString(),_lte:new Date(e.to).toISOString()}}]),e.material&&e.material.value&&e.material.value.length>0&&(t=[...t,{material_id:{_eq:e.material.value}}]),n(!1),r(t)},initialValues:{vehicle_number:"",material:null,vehicle:null,from:"",to:""},children:({handleSubmit:e,handleReset:n,setFieldValue:t,values:i})=>(0,z.jsxs)("form",{onSubmit:e,onReset:n,children:[(0,z.jsxs)(W.xuv,{display:"flex",flexDirection:"row",children:[(0,z.jsx)(me.gN,{component:xe.nv,name:"vehicle_number",onChange:e=>t("vehicle_number",e.target.value.replace(" ","").toUpperCase()),label:"vehicle number",sx:{margin:2,width:"40%"}}),(0,z.jsx)(me.gN,{component:xe.F2,name:"material",onChange:(e,n)=>t("material",n),loading:C,onOpen:()=>y({variables:{limit:3e3}}),onInputChange:(e,n)=>{y({variables:{where:{name:{_like:`%${n}%`}},limit:3e3}})},options:c,renderInput:e=>(0,z.jsx)(W.nvn,Object.assign({},e,{label:"Material"})),sx:{margin:2,width:"40%"}}),(0,z.jsx)(me.gN,{component:xe.F2,name:"vehicle",loading:k,disableClearable:!0,onChange:(e,n)=>{t("vehicle",n.value)},isOptionEqualToValue:(e,n)=>e.value===n.value,onOpen:()=>Z({variables:{limit:3e3}}),onInputChange:(e,n)=>{Z({variables:{where:{name:{_like:`%${n}%`}},limit:3e3}})},options:u,renderInput:e=>(0,z.jsx)(W.nvn,Object.assign({},e,{label:"Vehicle"})),sx:{margin:2,width:"40%"}})]}),(0,z.jsxs)(W.xuv,{display:"flex",alignItems:"flex-start",sx:{ml:1},children:[(0,z.jsx)(W.XZJ,{checked:m,onChange:e=>x(e.target.checked)}),(0,z.jsx)(W.ZT$,{variant:"body2",sx:{ml:1,my:"auto"},children:"filter by time"})]}),m&&(0,z.jsxs)(W.xuv,{display:"flex",gap:"10px",sx:{mt:2,ml:2},flexDirection:"row",children:[(0,z.jsx)(pe._,{dateAdapter:ge.H,children:(0,z.jsx)(be.x,{renderInput:e=>(0,z.jsx)(W.nvn,Object.assign({},e)),disableFuture:!0,label:"from date",value:new Date(i.from),onChange:e=>{t("from",(null==e?void 0:e.toISOString())||"")}})}),(0,z.jsx)(pe._,{dateAdapter:ge.H,children:(0,z.jsx)(be.x,{renderInput:e=>(0,z.jsx)(W.nvn,Object.assign({},e)),label:"to date",minDateTime:new Date(i.from),disableFuture:!0,value:i.to,onChange:e=>{t("to",(null==e?void 0:e.toISOString())||"")}})})]}),(0,z.jsxs)(W.xuv,{display:"flex",m:1,alignItems:"flex-start",children:[(0,z.jsx)(W.zxk,{type:"submit",children:"submit"}),(0,z.jsx)(W.zxk,{type:"reset",children:"reset"})]})]})}),w?null:(0,z.jsx)(q._$r,{loading:v||w,onPageChange:e=>a(e),disableColumnFilter:!0,disableColumnMenu:!0,onPageSizeChange:e=>t(e),disableColumnSelector:!0,rows:(null==b?void 0:b.bill)||[],paginationMode:"server",rowCount:null==j||null==(e=j.bill_aggregate.aggregate)?void 0:e.count,columns:[{field:"vehicle_number",headerName:"vehicle number",width:150,editable:!1},{field:"material",headerName:"material",width:100,valueGetter:e=>e.value.name},{field:"customer",headerName:"customer",width:150,valueGetter:e=>e.value&&e.value.name?e.value.name:"null"},{field:"customer_2",headerName:"customer 2",width:150,valueGetter:e=>e.value&&e.value.name?e.value.name:"null"},{field:"customer_3",headerName:"customer 3",width:150,valueGetter:e=>e.value&&e.value.name?e.value.name:"null"},{field:"vehicle",headerName:"vehicle",sortable:!0,width:150,valueGetter:e=>e.value.name},{field:"created_at",headerName:"created At",sortable:!0,width:250,valueGetter:e=>e.value&&new Date(e.value).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",hour12:!0,hour:"numeric",minute:"numeric",second:"numeric",day:"numeric"})||""},{field:"second_weight",headerName:"second weight",sortable:!0,width:110,valueGetter:e=>e.value?"scale weight":"tare weight"},{field:"scale_weight",headerName:"scaleWeight",sortable:!0,width:120},{field:"tare_weight",headerName:"tareWeight",sortable:!0,width:120},{field:"netWeight",headerName:"netWeight",sortable:!0,width:120,valueGetter:e=>Math.abs(parseInt(`${e.row.scale_weight}`,10)-parseInt(`${e.row.tare_weight}`||"0",10)||0)},{field:"info",headerName:"info",sortable:!1,width:120,renderCell:e=>(0,z.jsx)(he,{setLoading:e=>p(e),name:"info",id:e.row.id})}],autoPageSize:!0,filterMode:"server",onFilterModelChange:e=>r(e),onSortModelChange:e=>o(e),disableSelectionOnClick:!0})]})})};t(42605);const je=[{field:"name",headerName:"name",width:150},{field:"address",headerName:"Address",width:300},{field:"display_name",headerName:"display name",width:300},{field:"phone",headerName:"phone",width:150},{field:"mail",headerName:"mail",width:180}],fe=()=>{var e;const{data:n,loading:t,error:a}=(0,K.zs)({variables:{where:{tenent:{customers:{email:{_eq:null==(e=N.I8.currentUser)?void 0:e.email}}}}}});return(0,f.useEffect)((()=>{console.log(n),console.log(a)}),[n,t,a]),(0,z.jsx)(i.xu,{children:(0,z.jsx)(i.xu,{height:500,width:"100%",textAlign:"center",children:(0,z.jsx)(q._$r,{loading:t,rows:(null==n?void 0:n.weighbridge)||[],columns:je,autoPageSize:!0,checkboxSelection:!0,disableSelectionOnClick:!0})})})};const we=function(){return(0,z.jsx)(i.xu,{children:(0,z.jsx)(T,{children:(0,z.jsxs)(j.Z5,{children:[(0,z.jsx)(j.AW,{path:"/",element:(0,z.jsx)($,{})}),(0,z.jsx)(j.AW,{path:"/bills",element:(0,z.jsx)(ve,{})}),(0,z.jsx)(j.AW,{path:"/weighbridges",element:(0,z.jsx)(fe,{})})]})})})}},4678:e=>{e.exports=[[e.id,".App {\r\n  text-align: center;\r\n}\r\n\r\n.App-logo {\r\n  height: 40vmin;\r\n  pointer-events: none;\r\n}\r\n\r\n@media (prefers-reduced-motion: no-preference) {\r\n  .App-logo {\r\n    animation: App-logo-spin infinite 20s linear;\r\n  }\r\n}\r\n\r\n.App-header {\r\n  background-color: #282c34;\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: calc(10px + 2vmin);\r\n  color: white;\r\n}\r\n\r\n.App-link {\r\n  color: #61dafb;\r\n}\r\n\r\n@keyframes App-logo-spin {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2Qsb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0U7SUFDRSw0Q0FBNEM7RUFDOUM7QUFDRjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLDZCQUE2QjtFQUM3QixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0U7SUFDRSx1QkFBdUI7RUFDekI7RUFDQTtJQUNFLHlCQUF5QjtFQUMzQjtBQUNGIiwiZmlsZSI6IkFwcC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuQXBwIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5BcHAtbG9nbyB7XHJcbiAgaGVpZ2h0OiA0MHZtaW47XHJcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbn1cclxuXHJcbkBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogbm8tcHJlZmVyZW5jZSkge1xyXG4gIC5BcHAtbG9nbyB7XHJcbiAgICBhbmltYXRpb246IEFwcC1sb2dvLXNwaW4gaW5maW5pdGUgMjBzIGxpbmVhcjtcclxuICB9XHJcbn1cclxuXHJcbi5BcHAtaGVhZGVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjgyYzM0O1xyXG4gIG1pbi1oZWlnaHQ6IDEwMHZoO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGZvbnQtc2l6ZTogY2FsYygxMHB4ICsgMnZtaW4pO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuLkFwcC1saW5rIHtcclxuICBjb2xvcjogIzYxZGFmYjtcclxufVxyXG5cclxuQGtleWZyYW1lcyBBcHAtbG9nby1zcGluIHtcclxuICBmcm9tIHtcclxuICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xyXG4gIH1cclxufVxyXG4iXX0= */","",""]]}}]);